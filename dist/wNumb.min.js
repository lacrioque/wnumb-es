var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},__assign.apply(this,arguments)};export function strReverse(e){return e.split("").reverse().join("")}export function strStartsWith(e,t){return e.substring(0,t.length)===t}export function strEndsWith(e,t){return e.slice(-1*t.length)===t}export function throwEqualError(e,t,r,n){if((e[t]||e[r])&&e[t]===e[r])throw new Error("Error: ".concat(n||"").concat(t))}export function isValidNumber(e){return"number"==typeof e&&isFinite(e)}export function toFixed(e,t){var r=e.toString().split("e"),n=Math.round(+(r[0]+"e"+(r[1]?+r[1]+t:t))).toString().split("e");return(+(n[0]+"e"+(n[1]?+n[1]-t:-t))).toFixed(t)}var wNumb=function(){function e(e){this._options=e=this.validate(e)}return e.prototype.formatTo=function(e,t){var r,n,i,o=e,a="",s="";if(isValidNumber(e=t.encoder(e))){var u;if(0===parseFloat(e.toFixed(t.decimals))&&(e=0),e<0&&(r=!0,e=Math.abs(e)),u=toFixed(e,t.decimals),u=e.toString(),i=e+"",-1!==u.indexOf(".")&&(i=(n=u.split("."))[0],a=t.mark+n[1]),t.thousand){var f=strReverse(i).match(/.{1,3}/g)||[i];i=strReverse(f.join(strReverse(t.thousand)))}return r&&t.negativeBefore&&(s+=t.negativeBefore),t.prefix&&(s+=t.prefix),r&&t.negative&&(s+=t.negative),s+=i,s+=a,t.suffix&&(s+=t.suffix),s=t.edit(s,o)+""}},e.prototype.formatFrom=function(e,t){var r,n="",i=0;if((e=t.undo(e))&&"string"==typeof e&&(t.negativeBefore&&strStartsWith(e,t.negativeBefore)&&(e=e.replace(t.negativeBefore,""),r=!0),t.prefix&&strStartsWith(e,t.prefix)&&(e=e.replace(t.prefix,"")),t.negative&&strStartsWith(e,t.negative)&&(e=e.replace(t.negative,""),r=!0),t.suffix&&strEndsWith(e,t.suffix)&&(e=e.slice(0,-1*t.suffix.length)),t.thousand&&(e=e.split(t.thousand).join("")),t.mark&&(e=e.replace(t.mark,".")),r&&(n+="-"),""!==(n=(n+=e).replace(/[^0-9\.\-.]/g,""))&&(i=Number(n),isValidNumber(i=t.decoder(i)))))return i},e.prototype.defaultDecimals=function(e){if(e<0||e>8)throw new Error("decimal option needs to be between 0 and 8");return e},e.prototype.validate=function(e){var t={decimals:this.defaultDecimals(e.decimals||0),mark:e.mark||".",thousand:e.thousand||"",prefix:e.prefix||"",suffix:e.suffix||"",negative:e.negativeBefore||"-",negativeBefore:e.negativeBefore||"",encoder:e.encoder||function(e){return e},decoder:e.decoder||function(e){return e},edit:e.edit||function(e,t){return e},undo:e.undo||function(e){return e}};return throwEqualError(t,"mark","thousand","Options 'mark' cannot be the same as option 'thousand' "),throwEqualError(t,"prefix","negative","Options 'prefix' cannot be the same as option 'negative' "),throwEqualError(t,"prefix","negativeBefore","Options 'prefix' cannot be the same as option 'negativeBefore' "),t},Object.defineProperty(e.prototype,"options",{get:function(){return __assign({},this._options)},set:function(e){this._options=this.validate(e)},enumerable:!1,configurable:!0}),e.prototype.to=function(e){return this.formatTo(e,this._options)},e.prototype.from=function(e){return this.formatFrom(e,this._options)},e}();export{wNumb};export default function(e){return new wNumb(e)}